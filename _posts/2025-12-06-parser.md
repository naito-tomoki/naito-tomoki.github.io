---
layout: default
title: parserの作り方解説
date: 2025-12-06
permalink: /tech/
---

### parserとは

字句解析してくれたものを構文解析するものです。<br>
字句解析っていうのは、これは単語、これはファイル名って感じでラベリングしてくれます。<br>
構文解析はそれを構文木(こうぶんぎ)にしてくれます。

### 構文木とは
構文を木のような構造にすることです。<br>
説明を省略して先に1 + 2 * 3 + 4という式を例に木のような構造にすると
```
1.   [+]
2.  /   \
3. [1]  [+]
4.     /   \
5.   [*]   [4]
6.  /   \
7. [2]  [3]
```
こんな感じになります。

### 構文木を活用する
上でつくった構文木を、実際に計算するとき、どういう手順を経て計算するのか解説します。<br>
1~3行目から見ていきましょう。
```
1.   [+]
2.  /   \
3. [1]  [+]
```
この + は下に左右に分けてまた構文木を広げます。<br>
一番上の + は左右の値を足した結果になります。<br>
例えば、下の構文木をみてください。
```
    [+]
   /   \
  [3]  [5]
```
このとき、一番上の + は左の3、右の5を足した結果になります。<br>
いうなれば下の状態になります。
```
    [8]
   /   \
  [3]  [5]
```

これで最初の一行目の意味がわかると思います。
```
1.	  [1 + (右の+)]
2.   /            \
3. [1]            [+]
```
上にように表せますね。

右の + は値が決まってないので、次はそっちに注目していきましょう。
```
3.    [+]
4.   /   \
5. [*]   [4]
```
こんな感じで続いていますね。<br>
これも下のように書き換えることができます。
```
3.	  [(左の*) + 4]
4.   /            \
5. [*]            [4]
```

左の値がわからないので、そこの下を次に見ましょう。
```
5.    [*]
6.	 /   \
7. [2]   [3]
```

これも下のように表せますね。
```
5.   [6 (2 * 3)]
6.  /           \
7. [2]          [3]
```

これでこの結果がわかったので、上に戻りましょう。
```
3.        [6(左の*) + 4]
4.		 /             \
5.	[6 (2 * 3)]		   [4]
```

さらに上に続いてるので戻りましょう。
```
1.   [1 + 10(右の+)]
2.  /              \
3. [1]          [6 + 4]
```

これで結果がわかったので、全体を見ましょう
```
1.   [1 + ((2 * 3) + 4)]
2.  /                   \
3. [1]		          [(2 * 3) + 4]
4.     			       /             \
5.			        [2 * 3]           [4]
6. 		           /       \
7.               [2]       [3]
```
